# Model Configuration
model:
  name: "efficientnet_b0"
  pretrained: true
  num_classes: 8
  dropout_rate: 0.3
  freeze_backbone: false
  freeze_epochs: 5  # Epochs to freeze backbone initially

# Data Configuration
data:
  data_dir: "../data"
  image_size: 224
  batch_size: 32
  num_workers: 4
  val_split: 0.15
  test_split: 0.15
  pin_memory: true
  
  # Class mapping
  classes:
    - "A+"
    - "A-"
    - "AB+"
    - "AB-"
    - "B+"
    - "B-"
    - "O+"
    - "O-"

# Augmentation Configuration
augmentation:
  train:
    horizontal_flip: 0.5
    vertical_flip: 0.3
    rotation_limit: 30
    brightness_limit: 0.2
    contrast_limit: 0.2
    gaussian_blur: 0.1
    gaussian_noise: 0.1
    elastic_transform: 0.2
    grid_distortion: 0.2
    coarse_dropout:
      max_holes: 8
      max_height: 16
      max_width: 16
      prob: 0.3
  
  normalize:
    mean: [0.485, 0.456, 0.406]
    std: [0.229, 0.224, 0.225]

# Training Configuration
training:
  epochs: 100
  early_stopping_patience: 15
  
  optimizer:
    name: "adamw"
    lr: 0.001
    weight_decay: 0.01
    betas: [0.9, 0.999]
  
  scheduler:
    name: "cosine_annealing_warm_restarts"
    T_0: 10
    T_mult: 2
    eta_min: 0.00001
  
  loss:
    name: "cross_entropy"
    label_smoothing: 0.1
    use_class_weights: true
  
  mixed_precision: true
  gradient_clip_val: 1.0
  accumulate_grad_batches: 1

# Checkpoint Configuration
checkpoint:
  save_dir: "./checkpoints"
  save_top_k: 3
  monitor: "val_f1"
  mode: "max"

# Logging Configuration
logging:
  log_dir: "./logs"
  tensorboard: true
  wandb:
    enabled: false
    project: "fingerprint-blood-detection"
    entity: null

# Inference Configuration
inference:
  model_path: "./checkpoints/best_model.pth"
  onnx_path: "./exports/model.onnx"
  confidence_threshold: 0.5
  
# Hardware Configuration
hardware:
  device: "auto"  # auto, cuda, cpu, mps
  seed: 42
  deterministic: true
